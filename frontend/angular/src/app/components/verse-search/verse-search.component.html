<div class="verse-search-container">
  <!-- HEADER -->
  <div class="header">
    <h1>ğŸ“– Palavra Conectada</h1>
    <p class="subtitle">
      {{ searchMode === 'intelligent' 
        ? 'Conte como vocÃª estÃ¡ se sentindo e receba versÃ­culos personalizados com IA' 
        : 'Busque versÃ­culos por palavra-chave' }}
    </p>
  </div>

  <!-- TOGGLE DE MODO -->
  <div class="mode-toggle">
    <button 
      (click)="searchMode = 'intelligent'" 
      [class.active]="searchMode === 'intelligent'"
      class="mode-btn"
    >
      ğŸ§  Busca Inteligente (IA)
    </button>
    <button 
      (click)="searchMode = 'simple'" 
      [class.active]="searchMode === 'simple'"
      class="mode-btn"
    >
      ğŸ” Busca Simples
    </button>
  </div>

  <!-- ÃREA DE BUSCA -->
  <div class="search-section">
    <div class="search-box">
      <input 
        type="text" 
        [(ngModel)]="searchTerm" 
        (keyup.enter)="search()"
        [placeholder]="searchMode === 'intelligent' 
          ? 'Ex: Estou triste, Estou com medo, Estou ansioso...' 
          : 'Ex: amor, paz, esperanÃ§a...'"
        class="search-input"
      />
      
      <select [(ngModel)]="selectedVersion" class="version-select">
        <option *ngFor="let version of availableVersions" [value]="version.code">
          {{ version.name }}
        </option>
      </select>
    </div>

    <div class="button-group">
      <button (click)="search()" [disabled]="isLoading" class="btn btn-primary">
        {{ isLoading ? 'Processando...' : (searchMode === 'intelligent' ? 'ğŸ§  Analisar com IA' : 'ğŸ” Buscar') }}
      </button>
      
      <button (click)="getRandomVerse()" [disabled]="isLoading" class="btn btn-secondary">
        ğŸ² Surpreenda-me
      </button>
    </div>
  </div>

  <!-- EXEMPLOS DE BUSCA -->
  <div class="examples-section" *ngIf="!intelligentResult && !searchResult && !randomVerse">
    <p class="examples-title">âœ¨ Experimente:</p>
    <div class="examples-grid">
      <button 
        *ngFor="let example of exampleSearches" 
        (click)="useExample(example.term, example.mode)"
        class="example-btn"
        [class.intelligent]="example.mode === 'intelligent'"
        [disabled]="isLoading"
      >
        <span class="example-term">{{ example.term }}</span>
        <span class="example-desc">{{ example.description }}</span>
      </button>
    </div>
  </div>

  <!-- MENSAGEM DE ERRO -->
  <div *ngIf="errorMessage" class="alert alert-error">
    âš ï¸ {{ errorMessage }}
  </div>

  <!-- LOADING -->
  <div *ngIf="isLoading" class="loading">
    <div class="spinner"></div>
    <p>{{ searchMode === 'intelligent' ? 'Analisando suas emoÃ§Ãµes...' : 'Buscando na Palavra de Deus...' }}</p>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- RESULTADO INTELIGENTE (COM IA) -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div *ngIf="intelligentResult" class="intelligent-results">
    
    <!-- ANÃLISE DE EMOÃ‡ÃƒO -->
    <div class="emotion-analysis">
      <div class="emotion-header">
        <span class="emotion-icon">{{ getEmotionIcon(intelligentResult.detectedEmotion) }}</span>
        <div>
          <h3>{{ intelligentResult.message }}</h3>
          <div class="emotion-meta">
            <span class="emotion-name">{{ intelligentResult.detectedEmotion }}</span>
            <span [class]="'badge ' + getConfidenceBadgeClass(intelligentResult.confidence)">
              {{ intelligentResult.confidence }}% de confianÃ§a
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- VERSÃCULO RECOMENDADO -->
    <div *ngIf="intelligentResult.recommendedVerse" class="recommended-verse">
      <div class="verse-label">
        <span class="star">â­</span> 
        <strong>VersÃ­culo Recomendado para VocÃª:</strong>
      </div>
      
      <div class="verse-card featured">
        <div class="verse-reference">
          {{ getVerseReference(intelligentResult.recommendedVerse) }}
        </div>
        <div class="verse-text">
          "{{ intelligentResult.recommendedVerse.text }}"
        </div>
        <div class="verse-footer">
          <span class="verse-meta">
            {{ intelligentResult.recommendedVerse.author }} â€¢ 
            {{ intelligentResult.recommendedVerse.testament }}
          </span>
        </div>
      </div>
    </div>

    <!-- VERSÃCULOS ALTERNATIVOS -->
    <div *ngIf="intelligentResult.alternativeVerses?.length" class="alternative-verses">
      <h4>ğŸ“š Outros versÃ­culos que podem ajudar:</h4>
      <div class="verses-grid">
        <div *ngFor="let verse of intelligentResult.alternativeVerses; let i = index" 
             class="verse-card"
             [style.animation-delay]="(i * 0.1) + 's'">
          <div class="verse-reference-small">
            {{ getVerseReference(verse) }}
          </div>
          <div class="verse-text-small">
            "{{ verse.text }}"
          </div>
        </div>
      </div>
    </div>

    <!-- SUGESTÃ•ES -->
    <div *ngIf="intelligentResult.suggestions?.length" class="suggestions">
      <h4>ğŸ’¡ O que vocÃª pode fazer:</h4>
      <ul class="suggestions-list">
        <li *ngFor="let suggestion of intelligentResult.suggestions">
          {{ suggestion }}
        </li>
      </ul>
    </div>

  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- RESULTADO SIMPLES (BUSCA POR PALAVRA) -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div *ngIf="searchResult && searchResult.count > 0" class="results-section">
    <div class="results-header">
      <h2>ğŸ“š Resultados da Busca</h2>
      <p class="results-count">
        Encontrados <strong>{{ searchResult.count }}</strong> 
        versÃ­culo(s) com "<strong>{{ searchResult.keyword }}</strong>"
      </p>
    </div>

    <div class="verses-container">
      <div *ngFor="let verse of searchResult.verses; let i = index" 
           class="verse-card"
           [style.animation-delay]="(i * 0.1) + 's'">
        
        <div class="verse-reference">
          {{ getVerseReference(verse) }}
        </div>
        
        <div class="verse-text">
          "{{ verse.text }}"
        </div>
        
        <div class="verse-footer">
          <span class="verse-meta">
            {{ verse.author }} â€¢ {{ verse.group }}
          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- VERSÃCULO ALEATÃ“RIO -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div *ngIf="randomVerse" class="random-verse">
    <div class="verse-label">
      <span class="dice">ğŸ²</span> 
      <strong>VersÃ­culo do Dia:</strong>
    </div>
    
    <div class="verse-card featured">
      <div class="verse-reference">
        {{ getVerseReference(randomVerse) }}
      </div>
      <div class="verse-text">
        "{{ randomVerse.text }}"
      </div>
      <div class="verse-footer">
        <span class="verse-meta">
          {{ randomVerse.author }} â€¢ {{ randomVerse.group }}
        </span>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <div class="footer">
    <p>Desenvolvido com ğŸ’™ usando Angular + ASP.NET Core + IA</p>
    <p class="tech-stack">Angular | C# | SQLite | Entity Framework</p>
  </div>
</div>

